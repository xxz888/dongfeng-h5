(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-444f5dac"],{"159a":function(t,e,a){"use strict";var s=a("3822"),i=a.n(s);i.a},2698:function(t,e,a){},3822:function(t,e,a){},bad9:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return n}));var s=a("b775");function i(t){return Object(s["a"])({url:"/paymentgateway/app/province/list",method:"post",params:t})}function n(t){return Object(s["a"])({url:"/paymentgateway/app/city/list",method:"post",params:t})}},bdce:function(t,e,a){"use strict";var s=a("2698"),i=a.n(s);i.a},e799:function(t,e,a){"use strict";a.r(e);var s,i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{title:"设置还款计划","left-arrow":""},on:{"click-left":t.onClickLeft}}),s("div",{staticClass:"warpper"},[s("div",{staticClass:"submit_plan_box"},[s("div",{staticClass:"card_item_sub"},[s("div",{staticClass:"card_item_top "},[s("van-row",{staticClass:"card_item_top",attrs:{type:"flex",justify:"space-between"}},[s("van-col",{attrs:{span:"4"}},[s("div",{staticClass:"card_icon_box"},[s("img",{staticClass:"card_icon",attrs:{src:a("af39")("./BANK_"+t.item.logimg+".png")}})])]),s("van-col",{staticClass:"card_bank",attrs:{span:"20"}},[s("div",{staticClass:"  van-ellipsis"},[t._v("\n                "+t._s(t.item.bankName)+"  \n                "),s("span",{},[t._v("("+t._s(t._f("cardNoEnd")(t.item.cardNo))+")")])]),s("div",{staticClass:"card_type "},[t._v("\n                账单日 每月"+t._s(t.item.billDay)+"日｜还款日 每月"+t._s(t.item.repaymentDay)+"日\n              ")])])],1)],1)]),s("div",{staticClass:"submit_plan_dec_box"},[s("van-row",{attrs:{type:"flex"}},[s("van-col",{staticClass:"submit_plan_dec",attrs:{span:"12"}},[s("span",{staticClass:"submit_plan_dec_title color_999"},[t._v("还款总次数：")]),s("span",{staticClass:"submit_plan_dec_cont"},[t._v(t._s(t.task.repaymentCount)+"次")])]),s("van-col",{staticClass:"submit_plan_dec",attrs:{span:"12"}},[s("span",{staticClass:"submit_plan_dec_title color_999"},[t._v("已还次数：")]),s("span",{staticClass:"submit_plan_dec_cont"},[s("span",{},[t._v("0")]),t._v("次")])])],1),s("van-row",{attrs:{type:"flex"}},[s("van-col",{staticClass:"submit_plan_dec",attrs:{span:"12"}},[s("span",{staticClass:"submit_plan_dec_title color_999"},[t._v("还款总金额：")]),s("span",{staticClass:"submit_plan_dec_cont"},[t._v(t._s(t._f("toFixed")(Number(t.task.amount)))+"元")])]),s("van-col",{staticClass:"submit_plan_dec",attrs:{span:"12"}},[s("span",{staticClass:"submit_plan_dec_title color_999"},[t._v("已还金额：")]),s("span",{staticClass:"submit_plan_dec_cont"},[t._v("0.00元")])])],1),s("van-row",{staticClass:"submit_plan_dec  ",attrs:{type:"flex"}},[s("van-col",{staticClass:"submit_plan_dec",attrs:{span:"12"}},[s("span",{staticClass:"submit_plan_dec_title color_999"},[t._v("预计手续费：")]),s("span",{staticClass:"submit_plan_dec_cont"},[t._v(t._s(t._f("toFixed")(Number(t.task.totalServiceCharge)))+"元")])]),s("van-col",{staticClass:"submit_plan_dec",attrs:{span:"12"}},[s("span",{staticClass:"submit_plan_dec_title color_999"},[t._v("已扣手续费：")]),s("span",{staticClass:"submit_plan_dec_cont"},[t._v("0.00元")])])],1)],1),t.merchantTrueFalseBy?s("ul",{staticClass:"plan_list"},[t._m(0),t._l(t.task.result,(function(e){return s("li",{key:e.key,staticClass:"plan_item"},[t._m(1,!0),t._l(e.consumeTaskVOs,(function(e){return s("ul",{key:e.key,staticClass:"plan_item_box"},[s("li",{staticClass:"plan_item_item time"},[t._v("\n              "+t._s(e.executeDateTime)+"\n            ")]),s("li",{staticClass:"plan_item_item type"},[t._v("\n              消费\n            ")]),s("li",{staticClass:"plan_item_item amount"},[t._v("\n              -"+t._s(Number(e.realAmount))+"\n            ")])])})),s("ul",{staticClass:"plan_item_box"},[s("li",{staticClass:"plan_item_item time"},[t._v("\n              "+t._s(e.executeDateTime)+"\n            ")]),s("li",{staticClass:"plan_item_item type"},[t._v("\n              还款\n            ")]),s("li",{staticClass:"plan_item_item amount"},[t._v("\n              +"+t._s(Number(e.amount))+"\n            ")]),t.consumeType?s("li",[s("div",{staticClass:"consume_icon"})]):t._e()])],2)}))],2):t._e(),s("div",{staticClass:"executeplan_btn "},[t.merchantTrueFalseBy?t._e():s("div",{staticClass:"confirmplan_btn two theme_btn",on:{click:function(e){return t.temporaryplan()}}},[t._v("启动计划")]),t.merchantTrueFalseBy?s("div",{staticClass:"confirmplan_btn two theme_btn",on:{click:function(e){return t.confirmPlan()}}},[t._v("启动计划")]):t._e()])])]),s("van-popup",{style:{height:"45%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("van-picker",{attrs:{"show-toolbar":"",title:"落地商户",columns:t.columns,"default-index":t.defConsumeType},on:{cancel:function(e){t.showPicker=!1},confirm:t.consumeTypeConfirm,change:t.onChange}})],1),s("city",{ref:"verificationMethod",attrs:{card:t.item,extraList:t.task},on:{merchant:t.merchant}}),s("is-password",{ref:"isPassword",on:{confirmPlan:t.confirmPlan}}),s("confirmorcancel",{ref:"Dialog",attrs:{src:"../../assets/alert2.png",but:"2",zi:t.start,message:t.message},on:{smsConfirm:t.smsConfirm,getCode:t.getCode,topClose:t.topClose}})],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"plan_title"},[a("ul",{staticClass:"plan_item_box"},[a("li",{staticClass:"plan_item_item time"},[t._v("时间")]),a("li",{staticClass:"plan_item_item type"},[t._v("类型")]),a("li",{staticClass:"plan_item_item amount"},[t._v("金额")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"repayment_status"},[a("div")])}],r=(a("28a5"),a("c5f6"),a("ac6a"),a("bd86")),c=(a("8e11"),a("f253")),o=(a("87d0"),a("e41f")),l=(a("b342"),a("ad06")),m=(a("47d1"),a("9ffb")),u=(a("4bc8"),a("d1e1")),d=(a("7f7f"),a("da02"),a("6b41")),p=a("f0d6"),h=a("bfac"),_=a("663f"),v=a("58d2"),f=a("b775"),g=a("4328"),b=a.n(g),C={data:function(){return{item:{},task:{allConsumeAmount:0,allRepaymentAmount:"0",allServiceCharge:0,amount:"0",bankName:"",brandId:"",channelName:"",consumeCount:0,couponId:null,creditCardNumber:"",dayRepaymentCount:"",executeDate:[],executeDates:"",extra:"",isHideResult:0,rate:.0058,repaymentCount:0,reservedAmount:"",resp_code:"000000",resp_message:"请求成功",result:[],serviceCharge:0,totalServiceCharge:0,userId:"",version:""},channelactive:[],authorityList:{result:{bankCard:"",bankName:"",channelTag:"",confirmSmsUrl:"",expiredTime:"",getSmsUrl:"",getSmsUrlNew:"",idCard:"",ipAddress:"",phone:"",securityCode:"",userName:""}},orderCode:"",merchantList:[],merchantTrueFalseBy:!1,consumeType:!1,extra:{},show:!1,columns:[],columnsActive:{},defConsumeType:0,message:"获取验证码",num:60,start:"为保障用户还款时的多元化场景，更有利于养卡提额，建立一个还款多元化消费、多通道介入机制和即时切换机制，请您确认是否体验此功能",getSmsUrl:"",confirmSmsUrl:"",channelTags:"",district:{}}},components:(s={},Object(r["a"])(s,d["a"].name,d["a"]),Object(r["a"])(s,u["a"].name,u["a"]),Object(r["a"])(s,m["a"].name,m["a"]),Object(r["a"])(s,"city",p["a"]),Object(r["a"])(s,"isPassword",_["a"]),Object(r["a"])(s,l["a"].name,l["a"]),Object(r["a"])(s,o["a"].name,o["a"]),Object(r["a"])(s,c["a"].name,c["a"]),Object(r["a"])(s,"confirmorcancel",h["a"]),s),created:function(){this.item=JSON.parse(this.$route.params.item),this.task=JSON.parse(this.$route.params.task),this.district=JSON.parse(this.$route.params.extra),this.getmerchantNameList()},methods:{onClickLeft:function(){this.publicJs.back()},createTask:function(t){var e=this;this.$store.commit("Loading"),Object(v["f"])(t.userId,t.brandId,t.creditCardNumber,t.amount,t.reservedAmount,String(t.executeDate),t.version,localStorage.getItem("isNotPoint"),t.dayRepaymentCount).then((function(t){e.$store.commit("closeLoading"),"000000"==t.resp_code?(e.merchantList.length>0&&(t.result.forEach((function(t){t.consumeTaskVOs.forEach((function(t){var a=Math.floor(Math.random()*e.merchantList.length);t.consumeType=e.merchantList[a].value}))})),e.merchantList.forEach((function(t){var a={text:t.merchant_display_name,id:t.id,value:t.value};e.columns.push(a)}))),e.task=t):"999994"==t.resp_code&&e.$notify({type:"warning",message:t.resp_message})}))},smsConfirm:function(t){var e=this;""!=t&&null!=t?Object(f["a"])({url:this.confirmSmsUrl.substring(6),method:"post",data:b.a.stringify({bankCard:this.item.cardNo,idCard:this.item.idcard,phone:this.item.phone,userName:this.item.userName,bankName:this.item.bankName,expiredTime:this.item.expiredTime,securityCode:this.item.securityCode,channelTag:this.channelTags,smsCode:t})}).then((function(t){"000000"==t.resp_code&&(e.$toast({message:t.resp_message,position:"bottom"}),e.$refs.Dialog.close(),e.$router.push({path:"/creditcard",query:{phone:localStorage.getItem("phone"),token:localStorage.getItem("token"),brandId:localStorage.getItem("brandId"),userId:localStorage.getItem("userId"),ip:e.global.ip,type:"h5",deviceId:localStorage.getItem("deviceId")}}))}),(function(t){e.$toast({message:res.resp_message,position:"bottom"})})):this.$toast({message:"请输入验证码",position:"bottom"})},getCode:function(){var t=this;Object(f["a"])({url:this.getSmsUrl,method:"post",data:b.a.stringify({bankCard:this.item.cardNo,idCard:this.item.idcard,phone:this.item.phone,userName:this.item.userName,bankName:this.item.bankName,expiredTime:this.item.expiredTime,securityCode:this.item.securityCode,channelTag:this.channelTags})}).then((function(e){if("000000"==e.resp_code){var a=setInterval((function(){t.message="("+t.num+")秒",t.num--,0==t.num&&(clearInterval(a),t.num=60,t.message="获取验证码")}),1e3);t.$toast({message:"验证码发送成功,请注意查收",position:"bottom"})}}))},topClose:function(){this.$router.push({path:"/creditcard",query:{phone:localStorage.getItem("phone"),token:localStorage.getItem("token"),brandId:localStorage.getItem("brandId"),userId:localStorage.getItem("userId"),ip:this.global.ip,type:"h5",deviceId:localStorage.getItem("deviceId")}})},onChange:function(t,e){this.columnsActive.consumeType=e.value},consumeTypeConfirm:function(t,e){this.columnsActive.consumeType=t.value,this.show=!1},merchant:function(t,e){this.merchantTrueFalseBy=!0,this.merchantList=JSON.parse(e),this.createTask(this.task),this.extra=JSON.parse(t)},temporaryplan:function(){this.$refs.verificationMethod.firstSelPro()},isPassword:function(){var t=this.global.dontPayPawBrandid.indexOf(Number(this.task.brandId));-1==t?this.confirmPlan():this.$refs.isPassword.onshow()},confirmPlan:function(){var t=this,e=this.extra.merprovince+"-"+this.extra.mercity+"-"+this.extra.merarea,a=JSON.stringify(this.task.result),s=this.task.version.split("-")[0];e=4==s||8==s||43==s||58==s||59==s||54==s||55==s||61==s||65==s||50==s||75==s||84==s?this.extra.merprovince+"-"+this.extra.mercity+"["+this.extra.merarea+"]":32==s||39==s||46==s||47==s||52==s||62==s||66==s||69==s||71==s||73==s||74==s||76==s||80==s||81==s||82==s||83==s||86==s||89==s?this.extra.merprovince+"-"+this.extra.mercity:5==s||37==s||44==s||70==s||85==s||87==s?this.extra.merprovince+"-"+this.extra.mercity+"("+this.extra.merarea+")":7==s||38==s?"":this.extra.merprovince+"-"+this.extra.mercity+"-"+this.extra.provinceId.split(",")[0]+"-"+this.extra.cityCode.split(",")[0],this.$store.commit("Loading"),Object(v["e"])(a,this.task.amount,this.task.reservedAmount,this.task.version,e,"",JSON.stringify(this.extra),this.task.couponId,this.item.cardNo).then((function(a){t.$store.commit("closeLoading"),"000000"==a.resp_code?t.$router.push({path:"/creditcard",query:{phone:localStorage.getItem("phone"),token:localStorage.getItem("token"),brandId:localStorage.getItem("brandId"),userId:localStorage.getItem("userId"),ip:t.global.ip,type:"h5",deviceId:localStorage.getItem("deviceId")}}):"999992"==a.resp_code&&t.$router.push({name:"confirmPlan",params:{channelactive:JSON.stringify(s),authorityList:JSON.stringify(a),item:JSON.stringify(t.item),task:JSON.stringify(t.task),province:e,extra:t.extra,isold:1}})}))}}},y=C,k=(a("bdce"),a("2877")),x=Object(k["a"])(y,i,n,!1,null,"f2422dd8",null);e["default"]=x.exports},f0d6:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"address",class:{toggHeight:t.istoggHeight}},[a("section",{staticClass:"city_title"},[a("div",{staticClass:"area_box"},[a("div",{staticClass:"area"},[t._v("\n          "+t._s(t.showProvince?"请选择省份":"请选择城市")+"\n        ")])])]),t.showProvince?a("ul",{staticClass:"proJuli"},t._l(t.provinceList,(function(e,s){return a("li",{key:s,staticClass:"addList",class:{active:e.selected},on:{click:function(a){return t.cityGet(e)}}},[a("span",[t._v(t._s(e.cityName))])])})),0):a("ul",{staticClass:"citJuli"},t._l(t.showCityList,(function(e,s){return a("li",{key:s,staticClass:"addList",class:{active:e.selected},on:{click:function(a){return t.getCityId(e)}}},[a("span",[t._v(t._s(e.cityName))])])})),0)]),a("div",{staticClass:"layout",class:{layoutBg:t.islayout},on:{click:function(e){return t.closeAdd()}}})])},i=[],n=a("bad9"),r={props:{channel:{type:String,default:null}},data:function(){return{islayout:!1,istoggHeight:!1,showProvince:!0,provinceList:[],showCityList:[],province:{}}},methods:{getprovince:function(){var t=this;Object(n["b"])({channelTag:this.channel}).then((function(e){t.showProvince=!0,"000000"==e.resp_code?t.provinceList=e.result:(t.closeAdd(),t.$parent.merchantTrueFalseBy=!0)}))},cityGet:function(t){var e=this;this.province=t,Object(n["a"])({parent:t.id,channelTag:this.channel}).then((function(t){"000000"==t.resp_code?(e.showCityList=t.result,e.showProvince=!1):(e.closeAdd(),e.$parent.merchantTrueFalseBy=!0)}))},getCityId:function(t){this.$parent.provinceName=this.province.cityName,this.$parent.cityName=t.cityName,this.$parent.provinceCode=this.province.id,this.$parent.cityCode=t.id,this.closeAdd()},choseAdd:function(){this.getprovince(),this.islayout=!0,this.istoggHeight=!0},closeAdd:function(){this.istoggHeight=!1,this.islayout=!1}}},c=r,o=(a("159a"),a("2877")),l=Object(o["a"])(c,s,i,!1,null,null,null);e["a"]=l.exports}}]);