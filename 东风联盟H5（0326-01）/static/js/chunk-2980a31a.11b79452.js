(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2980a31a"],{"165d":function(t,a,e){},"26f1":function(t,a,e){"use strict";e.d(a,"h",(function(){return s})),e.d(a,"e",(function(){return o})),e.d(a,"a",(function(){return c})),e.d(a,"b",(function(){return u})),e.d(a,"c",(function(){return d})),e.d(a,"d",(function(){return l})),e.d(a,"f",(function(){return p})),e.d(a,"g",(function(){return m}));var n=e("b775"),r=e("4328"),i=e.n(r);function s(){return Object(n["a"])({url:"/creditcardmanager/app/empty/card/get/channel/all",method:"post"})}function o(t,a,e){return Object(n["a"])({url:"/creditcardmanager/app/empty/card/verify/card",method:"post",data:i.a.stringify({userId:t,creditCardNumber:a,version:e})})}function c(t,a,e,r,s,o){return Object(n["a"])({url:"/creditcardmanager/app/empty/card/calculate/reservedamount",method:"post",data:i.a.stringify({userId:t,creditCardNumber:a,amount:e,executeDate:r,version:s,dayRepaymentCounts:o})})}function u(t){return Object(n["a"])({url:"/creditcardmanager/app/empty/card/plan/error/message",method:"post",data:i.a.stringify({planItemId:t})})}function d(t){return Object(n["a"])({url:"/creditcardmanager/app/empty/card/plan/get",method:"post",data:i.a.stringify({planId:t})})}function l(t,a,e,r,s,o){return Object(n["a"])({url:"creditcardmanager/app/empty/card/plan/apply",method:"post",data:i.a.stringify({userId:t,creditCardNumber:a,taskAmount:e,version:r,dayRepaymentCounts:s,city:o})})}function p(t,a){return Object(n["a"])({url:"creditcardmanager/app/empty/card/plan/reRun",method:"post",data:i.a.stringify({userId:t,planId:a})})}function m(t,a){return Object(n["a"])({url:"creditcardmanager/app/empty/card/plan/stop",method:"post",data:i.a.stringify({userId:t,planId:a})})}},"58d2":function(t,a,e){"use strict";e.d(a,"i",(function(){return s})),e.d(a,"b",(function(){return o})),e.d(a,"l",(function(){return c})),e.d(a,"k",(function(){return u})),e.d(a,"a",(function(){return d})),e.d(a,"f",(function(){return l})),e.d(a,"g",(function(){return p})),e.d(a,"e",(function(){return m})),e.d(a,"c",(function(){return h})),e.d(a,"d",(function(){return f})),e.d(a,"j",(function(){return b})),e.d(a,"m",(function(){return y})),e.d(a,"h",(function(){return g}));var n=e("b775"),r=e("4328"),i=e.n(r);function s(t,a,e,r,s,o,c,u,d,l,p){return Object(n["a"])({url:"/paymentgateway/isChannelBind",method:"post",data:i.a.stringify({bankCard:t,idCard:a,phone:e,userName:r,bankName:s,expiredTime:o,securityCode:c,dbankCard:u,dphone:d,dbankName:l,loginPhone:p})})}function o(t){return Object(n["a"])({url:"/creditcardmanager/app/balance/verify/band/card",method:"post",params:t})}function c(t){return Object(n["a"])({url:"/creditcardmanager/app/balance/plan/stop",method:"post",params:t})}function u(t,a){return Object(n["a"])({url:"creditcardmanager/app/empty/card/plan/save",method:"post",data:i.a.stringify({userId:t,creditCardNumber:a})})}function d(t){return Object(n["a"])({url:"/creditcardmanager/app/balance/plan/save",method:"post",params:t})}function l(t,a,e,r,s,o,c,u,d){return Object(n["a"])({url:"/creditcardmanager/app/create/repayment/task",method:"post",data:i.a.stringify({userId:t,brandId:a,creditCardNumber:e,amount:r,reservedAmount:s,executeDate:o,version:c,isNotPoint:u,dayRepaymentCount:d})})}function p(t){return Object(n["a"])({url:"/creditcardmanager/app/create/repayment/task/new",method:"post",params:t})}function m(t,a,e,r,s,o,c,u,d){return Object(n["a"])({url:"/creditcardmanager/app/save/all/task",method:"post",data:i.a.stringify({taskJSON:t,amount:a,reservedAmount:e,version:r,city:s,isCustom:o,extra:c,couponId:u,creditCardNumber:d})})}function h(t,a,e,r,s){return Object(n["a"])({url:"/creditcardmanager/app/verify/card/isuserable",method:"post",data:i.a.stringify({userId:t,brandId:a,creditCardNumber:e,version:r,repaymentType:s})})}function f(t,a,e){return Object(n["a"])({url:"/creditcardmanager/app/get/repaymentbill/by/userid",method:"post",data:i.a.stringify({userId:t,creditCardNumber:a,size:e})})}function b(t,a){return Object(n["a"])({url:"/creditcardmanager/app/delete/repaymenttask/by/repaymenttaskid",method:"post",data:i.a.stringify({repaymentTaskId:t,isCloseAutoConsume:1})})}function y(){return Object(n["a"])({url:"/creditcardmanager/app/plan/today/run",method:"post"})}function g(){return Object(n["a"])({url:"/creditcardmanager/app/limit/min",method:"post",data:i.a.stringify({})})}},"6eff":function(t,a,e){"use strict";var n=e("165d"),r=e.n(n);r.a},"8c8e":function(t,a,e){"use strict";e.d(a,"c",(function(){return s})),e.d(a,"e",(function(){return o})),e.d(a,"h",(function(){return c})),e.d(a,"d",(function(){return u})),e.d(a,"g",(function(){return d})),e.d(a,"b",(function(){return l})),e.d(a,"f",(function(){return p})),e.d(a,"a",(function(){return m})),e.d(a,"i",(function(){return h}));var n=e("b775"),r=e("4328"),i=e.n(r);function s(t,a){return Object(n["a"])({url:"/user/app/slideshow/query/brandid",method:"post",data:i.a.stringify({brand_id:t,type:a})})}function o(t){return Object(n["a"])({url:"/user/app/jpush/MessagePush/Query",method:"post",data:i.a.stringify({userid:t})})}function c(t){return Object(n["a"])({url:"/user/app/jpush/MessagePush/update/App",method:"post",data:i.a.stringify({id:t})})}function u(t,a){return Object(n["a"])({url:"/user/app/jpush/history/brand/"+t,method:"get",params:{size:a}})}function d(t,a,e){return Object(n["a"])({url:"/user/app/news/getnewsby/brandidandclassification/andpage",method:"post",data:i.a.stringify({brandId:t,classifiCation:a,page:0,size:300,title:e})})}function l(t){return Object(n["a"])({url:"/user/app/brand/query/id",method:"get",params:{brand_id:t}})}function p(t,a,e){return Object(n["a"])({url:"/user/app/imagetext/query/brandid",method:"post",data:i.a.stringify({brand_id:t,page:a,size:e})})}function m(){return Object(n["a"])({url:"/user/app/add/querycirclefriendslibrary/make/information",method:"post"})}function h(){return Object(n["a"])({url:"/user/app/WeChatGroup/user/query",method:"post"})}},e56f:function(t,a,e){"use strict";e.r(a);var n,r=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("van-nav-bar",{attrs:{title:"空卡还款","left-arrow":"","right-text":"使用说明"},on:{"click-left":t.onClickLeft,"click-right":t.help}}),n("div",{staticClass:"warpper"},[n("van-row",{staticClass:"color_999 add_card ",attrs:{type:"flex",justify:"space-between"}},[n("ul",{staticClass:"card_rate"},[n("li",[n("span",{staticClass:"theme_color"},[t._v("·")]),t._v("费率：1.25%（每1万元125元手续费）\n        ")]),n("li",[n("span",{staticClass:"theme_color"},[t._v("·")]),t._v("每还款一笔，立返当前金额千分之1的现金\n        ")])])]),n("van-pull-refresh",{attrs:{"head-height":45},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(a){t.isLoading=a},expression:"isLoading"}},[n("div",{staticClass:"card_box"},[t._l(t.cardList,(function(a){return n("div",{key:a.key,staticClass:"card_item"},[n("div",{staticClass:"van-hairline--bottom card_item_top_box"},[n("van-row",{staticClass:"card_item_top",attrs:{type:"flex",justify:"space-between"}},[n("van-col",{attrs:{span:"3"}},[n("div",{staticClass:"card_icon_box"},[n("img",{staticClass:"card_icon",attrs:{alt:"银行logo",src:e("af39")("./BANK_"+a.logimg+".png")}})])]),n("van-col",{attrs:{span:"15"}},[n("div",{staticClass:"color_222 card_bank_name van-ellipsis"},[t._v("\n                  "+t._s(a.bankName)+"  \n                  "),n("span",{staticClass:"color_999"},[t._v("("+t._s(t._f("cardNoEnd")(a.cardNo))+")")])]),n("div",{staticClass:"card_type color_999"},[t._v("\n                  账单日 每月"+t._s(a.billDay)+"日｜还款日 每月"+t._s(a.repaymentDay)+"日\n                ")])]),n("van-col",{staticClass:"card_right",attrs:{span:"4"},on:{click:function(e){return t.carddel(a)}}},[n("div",{staticClass:"color_222 card_bank_name"},[n("van-icon",{staticClass:"card_arrow_icon color_999",attrs:{name:"cross"}})],1)])],1)],1),a.hasWaitingEmptyOrder||0!=a.allAmount||1==a.repaymentModel||a.balanceAllAmount?t._e():n("van-row",{staticClass:"plan_detail_box color_666",attrs:{type:"flex",justify:"space-between"}},[n("van-col",{staticClass:"plan_detail",attrs:{span:"12"}},[t._v("\n              请及时设置本月还款计划\n            ")]),n("van-col",{attrs:{span:"12"}},[a.hasWaitingEmptyOrder?t._e():n("van-button",{staticClass:"bank_btn",attrs:{round:"",type:"primary"},nativeOn:{click:function(e){return t.isuserable(a,"zeroPlan",e)}}},[t._v("制定计划\n              ")])],1)],1),a.hasWaitingEmptyOrder?n("van-row",{staticClass:"plan_detail_box color_666",attrs:{type:"flex",justify:"space-between"}},[3!=a.emptyCardPlanStatus?n("van-col",{attrs:{span:"12"}},[1==a.emptyCardPlanStatus?n("van-button",{staticClass:"bank_btn",attrs:{round:"",type:"primary"},nativeOn:{click:function(e){return t.detail(a)}}},[t._v("审核中\n              ")]):4==a.emptyCardPlanStatus||5==a.emptyCardPlanStatus?n("van-button",{staticClass:"bank_btn",attrs:{round:"",type:"primary"},nativeOn:{click:function(e){return t.detail(a)}}},[t._v("暂停中\n              ")]):t._e(),6==a.emptyCardPlanStatus?n("van-button",{staticClass:"bank_btn",attrs:{round:"",type:"primary"},nativeOn:{click:function(e){return t.detail(a)}}},[t._v("已完成\n              ")]):7==a.emptyCardPlanStatus?n("van-button",{staticClass:"bank_btn",attrs:{round:"",type:"info"}},[t._v("退还手续费中\n              ")]):t._e(),n("div",[t._v("请您稍作等待")])],1):3==a.emptyCardPlanStatus||2==a.emptyCardPlanStatus?n("van-col",{attrs:{span:"12"},nativeOn:{click:function(e){return t.detail(a)}}},[n("div",[t._v("\n                计划正在进行中\n              ")]),n("span",{staticClass:"plan_status  two"},[t._v("计划详情")]),n("z-circle",{staticClass:"circle_box",attrs:{percentage:Math.ceil(a.successAmount/a.allAmount*100)}})],1):t._e()],1):1!=a.planType&&3!=a.planType||0==a.allAmount&&!a.balanceAllAmount?t._e():n("van-row",{staticClass:"plan_detail_box color_666",attrs:{type:"flex",justify:"space-between"}},[n("van-col",{staticClass:"plan_detail",attrs:{span:"12"}},[t._v("\n              已制定本月还款计划\n            ")]),n("van-col",{attrs:{span:"12"}},[n("van-button",{staticClass:"bank_btn",attrs:{round:"",type:"info"}},[t._v("制定计划")])],1)],1)],1)})),0==t.cardList.length?n("nocard"):t._e()],2)]),n("div",{staticClass:"add_btn theme-linear-bg",on:{click:function(a){return t.addCard()}}},[n("van-icon",{attrs:{name:"add-o"}}),n("span",[t._v("添加信用卡")])],1),n("van-popup",{staticClass:"help",attrs:{position:"right"},model:{value:t.helpTrueFalseBy,callback:function(a){t.helpTrueFalseBy=a},expression:"helpTrueFalseBy"}})],1)],1)},i=[],s=(e("ac6a"),e("a481"),e("3b2b"),e("c5f6"),e("bd86")),o=(e("87d0"),e("e41f")),c=(e("c625"),e("b650")),u=(e("837b"),e("c36e")),d=(e("b342"),e("ad06")),l=(e("47d1"),e("9ffb")),p=(e("4bc8"),e("d1e1")),m=(e("4391"),e("58e6")),h=(e("8990"),e("5e46")),f=(e("558f"),e("0b33")),b=(e("7f7f"),e("da02"),e("6b41")),y=e("1cf0"),g=e("8c8e"),v=e("58d2"),_=e("da8e"),k=e("2d2d"),C=e("26f1"),O={data:function(){return{yaer:"",monthe:"",size:20,payList:[],typetow:3,active:0,isLoading:!1,count:0,user_id:localStorage.getItem("userId"),token:localStorage.getItem("token"),cardList:[],currentdate:"",year:"",timeDay:"",uppermonth:"",month:"",nextmonth:"",day:"",monthDay:"",bankIconList:[],type:"h5",helpTrueFalseBy:!1,authorityList:{result:{bankCard:"",bankName:"",channelTag:"",confirmSmsUrl:"",expiredTime:"",getSmsUrl:"",getSmsUrlNew:"",idCard:"",ipAddress:"",phone:"",securityCode:"",userName:""},fuwuList:[]},orderCode:""}},components:(n={},Object(s["a"])(n,b["a"].name,b["a"]),Object(s["a"])(n,f["a"].name,f["a"]),Object(s["a"])(n,h["a"].name,h["a"]),Object(s["a"])(n,m["a"].name,m["a"]),Object(s["a"])(n,p["a"].name,p["a"]),Object(s["a"])(n,l["a"].name,l["a"]),Object(s["a"])(n,d["a"].name,d["a"]),Object(s["a"])(n,u["a"].name,u["a"]),Object(s["a"])(n,c["a"].name,c["a"]),Object(s["a"])(n,"nocard",_["a"]),Object(s["a"])(n,"ZCircle",k["a"]),Object(s["a"])(n,o["a"].name,o["a"]),n),computed:{},created:function(){window.getcard=this.getcard,this.getcard();window.location.href;this.getbankIcon(),this.getNowFormatDate(),this.mGetDate(this.year,this.month),this.getnextmonth(Number(this.timeDay-this.day)+1),this.getuppermonth(Number(-this.day)),this.getcard()},methods:{getUrlParam:function(t){var a=new RegExp("(^|\\?|&)"+t+"=([^&]*)(\\s|&|$)","i");if(a.test(location.href))return unescape(RegExp.$2.replace(/\+/g," "))},onClickLeft:function(){if("h5"==this.type)this.$router.push({name:"home"});else try{window.android.invokeMethod(7,["true"])}catch(t){window.webkit.messageHandlers.iosWebKit.postMessage("goroothome")}},onClickRight:function(){this.helpTrueFalseBy=!0},getuppermonth:function(t){var a=new Date,e=t||0;a.setDate(a.getDate()+e);a.getFullYear();var n=a.getMonth()+1,r=a.getDate();return n=n<10?"0"+n:n,r=r<10?"0"+r:r,this.uppermonth=n,this.uppermonth},getnextmonth:function(t){var a=new Date,e=t||0;a.setDate(a.getDate()+e);a.getFullYear();var n=a.getMonth()+1,r=a.getDate();return n=n<10?"0"+n:n,r=r<10?"0"+r:r,this.nextmonth=n,this.nextmonth},getNowFormatDate:function(){var t=new Date,a=t.getMonth()+1,e=t.getDate();a>=1&&a<=9&&(a="0"+a),e>=0&&e<=9&&(e="0"+e),this.currentdate=e,this.year=t.getFullYear(),this.month=a,this.day=e,this.monthDay=this.month+"-"+this.day},mGetDate:function(t,a){var e=new Date(t,a,0);return this.timeDay=e.getDate(),e.getDate()},tabSwitch:function(t,a){this.active=t,0==t?this.getcard():this.getDebitCard()},amount:function(t){return Math.ceil(t.successAmount/t.allAmount*100)},addCard:function(){var t=this;1!=localStorage.getItem("realnameStatus")&&null!=localStorage.getItem("realnameStatus")?this.$dialog.confirm({title:"温馨提示",message:"您的账号未实名，为了保证正常使用功能请进行实名！",confirmButtonText:"去实名",cancelButtonText:"暂不实名"}).then((function(){t.$router.push({name:"faceRecognitionDetail"})})):0==this.active?this.$router.push({name:"debitCardAdd"}):this.$router.push({name:"depositCardAdd"})},getbankIcon:function(){var t=this;Object(y["d"])().then((function(a){"000000"==a.resp_code&&(t.bankIconList=a.result)}))},getcard:function(){var t=this;this.helpTrueFalseBy=!1,Object(y["f"])(this.user_id).then((function(a){t.cardList=[],"000000"==a.resp_code&&a.result.forEach((function(a){a.repaymentDay>a.billDay?t.day<=a.repaymentDay?(a.billDaymonth=t.month,a.repaymentDaymonth=t.month):t.day>a.repaymentDay&&(a.billDaymonth=t.nextmonth,a.repaymentDaymonth=t.nextmonth):a.repaymentDay<a.billDay?t.day>=a.billDay?(a.billDaymonth=t.month,a.repaymentDaymonth=t.nextmonth):t.day>a.repaymentDay&&t.day<a.billDay?(a.billDaymonth=t.month,a.repaymentDaymonth=t.nextmonth):t.day<=a.repaymentDay&&(a.billDaymonth=t.uppermonth,a.repaymentDaymonth=t.month):a.repaymentDay==a.billDay&&(t.day<a.repaymentDay?(a.billDaymonth=t.uppermonth,a.repaymentDaymonth=t.month):t.day>a.repaymentDay&&(a.billDaymonth=t.month,a.repaymentDaymonth=t.nextmonth));for(var e=0;e<t.bankIconList.length;e++){if(a.bankName==t.bankIconList[e].bank_name){a.logimg=t.bankIconList[e].bank_acronym,a.background=t.bankIconList[e].background;break}a.background="#232528",a.logimg="default"}t.$nextTick((function(){t.cardList.push(a)}))}))})),this.getNews()},getDebitCard:function(){var t=this;Object(y["i"])(this.user_id,2,2,0).then((function(a){t.cardList=[],"000000"==a.resp_code&&a.result.forEach((function(a){for(var e=0;e<t.bankIconList.length;e++){if(a.bankName==t.bankIconList[e].bank_name){a.logimg=t.bankIconList[e].bank_acronym,a.background=t.bankIconList[e].background;break}a.background="#232528",a.logimg="default"}t.$nextTick((function(){t.cardList.push(a)}))}))}))},goDetail:function(){this.$router.push({path:"bill",query:{phone:this.phone,token:localStorage.getItem("token"),brandId:this.brand_id,userId:this.user_id,ip:this.global.ip,type:"h5",deviceId:localStorage.getItem("deviceId"),billtype:"3"}})},detail:function(t){var a=this;this.$store.commit("Loading"),Object(C["c"])(t.hasWaitingEmptyOrder).then((function(e){a.$store.commit("closeLoading"),"000000"==e.resp_code&&a.$router.push({name:"previewPlan",params:{item:JSON.stringify(t),task:JSON.stringify(e.result)}})}))},isuserable:function(t,a,e){var n=this;e.cancelBubble=!0,0!=t.repaymentDay&&0!=t.billDay?this._router(t,a):this.$dialog.confirm({title:"温馨提示",message:"请先去设置还款日账单日"}).then((function(){n._router(t,"updateCard")}))},_router:function(t,a){this.$router.push({name:a,params:{item:JSON.stringify(t)}})},gettaskbill:function(t,a){var e=this;Object(v["d"])(t.userId,t.cardNo,1).then((function(n){"000000"==n.resp_code&&(n.result.content.length>0&&(0==n.result.content[0].taskStatus||2==n.result.content[0].taskStatus)?e.$router.push({name:"executeTask",params:{item:JSON.stringify(t),task:JSON.stringify(n.result.content[0])}}):e._router(t,a))}))},carddel:function(t){var a=this;this.$dialog.confirm({title:"信用卡解绑",message:"您确定要解绑尾号‘"+t.cardNo.substring(t.cardNo.length-4,t.cardNo.length)+"’信用卡吗？"}).then((function(){Object(y["c"])(a.token,t.cardNo,t.type).then((function(t){"000000"==t.resp_code&&(a.$notify({type:"primary",message:t.resp_message}),0==a.active?a.getcard():a.getDebitCard())}))}))},defaults:function(t){var a=this;Object(y["e"])(this.token,t.cardNo).then((function(t){"000000"==t.resp_code&&(a.$notify({type:"primary",message:t.resp_message}),0==a.active?a.getcard():a.getDebitCard())}))},getNews:function(){var t=this;Object(g["g"])(this.global.brandId,"功能跳转").then((function(a){"000000"==a.resp_code&&(t.fuwuList=a.result.content)}))},help:function(){var t=this,a=0;this.fuwuList.map((function(e){if("空卡使用说明"!=e.title)a++;else{var n=e.content+"?phone="+t.phone+"&token="+t.token+"&brandId="+t.global.brandId+"&userId="+t.userId+"&ip="+t.global.ip+"&deviceId="+localStorage.getItem("kd_webapp_deviceId");t.$router.push({name:"appLink",params:{url:JSON.stringify(n),title:JSON.stringify(e.title),type:"2"}})}})),a==this.fuwuList.length&&this.$toast({message:"敬请期待",position:"bottom"})},toTishi:function(){this.$toast("您有空卡任务待审核，无法重复提交！")},onRefresh:function(){var t=this;setTimeout((function(){t.$toast({message:"刷新成功",position:"bottom"}),t.isLoading=!1,t.getcard()}),300)}}},D=O,j=(e("6eff"),e("2877")),w=Object(j["a"])(D,r,i,!1,null,"2f5c70ff",null);a["default"]=w.exports}}]);